<!DOCTYPE html>
<html>
  <head>
    <style>
        body {
            font-style: arial;
            margin-top: 0px;
            margin-bottom: 0px;
        }

        .send-button {
            background-color: rgb(25, 135, 84);
            padding: 12px 15px;
            border-radius: 10px;
            color: white;
            border: none;
            margin-left: 10px;
            cursor: pointer;
            font-size: 15px;
        }

        .input-box {
            padding: 12px 15px;
            border-radius: 10px;
            border-width: 1px;
            font-size: 15px;
            flex-grow: 1;
        }

        .chat-input-container {
            display: flex;
            margin-bottom: 60px;
        }

        .app-container {
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .chat-message-user {
            display: flex;
            justify-content: end;
            align-items: start;
        }

        .chat-message-text {
            background-color: rgb(238, 238, 238);
            padding: 12px 10px;
            border-radius: 10px;
            margin-right: 10px;
            margin-left: 10px;
            margin-bottom: 20px;
            max-width: 300px;
        }

        .chat-message-robot {
            display: flex;
            align-items: start;
        }

        .chat-message-profile {
            width: 45px;
        }

        .chat-messages-container {
            flex-grow: 1;
            margin-top: 20px;
            overflow: scroll;
            scrollbar-width: none;
        }

        .welcome-message {
            background-color: rgb(185, 61, 61);
            color: bisque;
            display: flex;
            justify-content: center;
        }

        .loading-spinner-text,
        .Loading-spinner-button {
            height: 40px;
            margin: -15px;
        }

    </style>

    <title>Chatbot</title>
  </head>
  <body>
    <div class="js-container"></div>

    <script src="https://unpkg.com/supersimpledev/react.js"></script>
    <script src="https://unpkg.com/supersimpledev/react-dom.js"></script>

    <script src="https://unpkg.com/supersimpledev/chatbot.js"></script>

    <script src="https://unpkg.com/supersimpledev/babel.js"></script>
    
    <script type="text/babel">
        function App() {
            const [messages, setMessages] = React.useState([]);
            const [isRunning, setIsRunning] = React.useState(true);
            const boxRef = React.useRef(null);

            React.useEffect(() => {
                if (!isRunning) return;

                const id = setInterval(() => {
                    setMessages((prev) => [
                    ...prev,
                    { id: crypto.randomUUID(), text: `Message ${prev.length + 1}` }
                    ]);
                    }, 1000);

                return () => clearInterval(id);
            }, [isRunning]);

            React.useEffect(() => {
                const box = boxRef.current;
                if (!box) return;
                box.scrollTop = box.scrollHeight;
            }, [messages]);

            return (
            <>
                {/* CHANGED: toggle start/stop with one button */}
                <button onClick={() => setIsRunning((prev) => !prev)}>
                {isRunning ? "Stop" : "Start"}
                </button>

                <div
                ref={boxRef}
                style={{
                    height: "140px",
                    overflowY: "auto",
                    border: "1px solid #ccc",
                    padding: "8px",
                    marginTop: "8px",
                }}
                >
                {messages.map((m) => (
                    <div key={m.id}>{m.text}</div>
                ))}
                </div>
            </>
            );
        }

      const container = document.querySelector('.js-container');
      ReactDOM.createRoot(container).render(<App />);

    </script>
  </body>
</html>